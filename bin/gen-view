#!/usr/bin/env ruby
require 'fileutils'
require 'pathname'

require 'bundler/inline'

gemfile do
  source 'https://rubygems.org'
  # gem 'pry', require: true
end

name = ARGV[0]

puts "No name given!" && exit if !name

dir = Pathname.new(__dir__).join('..', 'client', 'src', 'views', name)

FileUtils.mkdir_p(dir)
FileUtils.touch(dir.join('index.vue'))
FileUtils.touch(dir.join("#{name}.html"))
FileUtils.touch(dir.join("#{name}.css"))
FileUtils.touch(dir.join("#{name}.js"))

template = <<~TEMPLATE
  <template src="./#{name}.html"></template>
  <style scoped src="./#{name}.css"></style>
  <script src="./#{name}.js"></script>
TEMPLATE

File.open(dir.join('index.vue'), 'w+') { |f| f.write(template) }